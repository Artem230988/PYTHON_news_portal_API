# News_portal
Задача: реализовать API для новостного портала 

Технологии: 
 - Python3 
 - Django
 - СУБД PostgreSQL (через отдельный docker образ)
 - Контейнер с приложением на alpine
 - Описание API - Swagger OpenApi Version 3

Описание приложения:
Для пользвателей:
- регистрация пользователя с помощью адреса электронной почты
- аутентификация с помощью JSON WEB TOKEN
- получение списка новостей для авторизованных и неавторизованных пользователей
- получение комментариев новости для авторизованного пользователя
- возможность оставить комментрий к любому комментарию новости для авторизованного пользователя (максимальный уровень вложенности -5). При этом пользователю, на чей комментарий ответил на емаил приходит уведомление

Для администратора:
- аутентификация с помощью K+JSON WEB TOKEN 
- получение списка новостей
- создание/редактирование/удаление новости (при удалении новости удаляются все комментарии связанные с новостью)
- удаление комментария (при удалении комментария удаляются все го дочерние комментарии)
- возможность забанить/разбанить пользователя. Забаненному пользователю запрещено оставлять любые комментарии. При бане пользователю приходит на емаил уведомление.

Само приложение должно иметь возможность создавать администратора запуском опреледенной командой.


## Installation guide
```
cd simbirsoft_test_task
docker-compose up --build
```
Для создания суперпользователя необходимо войти в запущенный контйнер
```
docker exec -it web_simbirsoft_container bash
python3 manage.py createsuperuser
```

Вход в админку:
127.0.0.1:8000/admin/

## Создание пользователя

http://127.0.0.1:8000/auth/users/ (ввести username, почту пароль и отправить post запрос)

После post запроса на указанную при регистрации почту придет письмо, которые будет содержать ссылку с uid и token. Пример: http://127.0.0.1:8000/#/activate/MjA3/ahj9ec-0883dba0434bf57525725e586cbab31

ahj9ec-0883dba0434bf57525725e586cbab31 - token

MjA3 - uid

Для подтверждения email необходимо отправить post запрос с uid  и token по адресу: http://127.0.0.1:8000/auth/users/activation/

*** отправка email реализована через консоль, т.е. в консоли вы увидите все отправленные email с нужной информацией

## API documentation

### Swagger Open API

Для входа в документацию swagger необходимо при запущенном контейнере перейти по ссылке http://127.0.0.1:8000/api/docs/
Документация построена с помощью библиотеки drf_spectacular (данная библиотека наоборот расставляет значки "замочка", который отвечает за права доступа пользователя к этому url)

#### JWT-token

Для тестирования api приложения необходимо выписать себе jwt-token, для этого нужно перейти по адресу

http://127.0.0.1:8000/auth/jwt/create/ 

отправить post запрос с логином и паролем далее использовать этот token

*** API реализовано согласно ТЗ, с учетом прав доступа и описано в Swagger.
